# アプリケーション名
　Rese（飲食店予約サービス）

## 作成した目的
　上級模擬案件提出用
 
## アプリケーションURL
　http://localhost/login
  
  ※本人認証メールとリマインダーはmailhogに送信されます。
  http://localhost:8025/

## 他のリポジトリ  
　無し

## 機能一覧
【基本機能】
・会員登録
・ログイン
・ログアウト
・ユーザー情報取得
・ユーザー飲食店お気に入り一覧取得
・ユーザー飲食店予約情報取得
・飲食店一覧取得
・飲食店詳細取得
・飲食店お気に入り追加
・飲食店お気に入り削除
・飲食店予約情報追加
・飲食店予約情報削除
・エリアで検索する
・ジャンルで検索する
・店名で検索する

【追加実装機能】
・飲食店予約情報変更
・飲食店評価
・飲食店評価閲覧
・バリデーション(認証／予約)
・店舗代表者作成  
・飲食店情報作成
・飲食店情報更新
・飲食店予約情報確認
・飲食店画像のストレージ保存
・メール認証
・予約当日リマインダー送信
  
## 使用技術（実行環境）
　OS：Linux（Ubuntu）
  環境：Docker Desktop v4.23.0
　言語：PHP 7.4.9、JQuery 3.7.1
　フレームワーク：Laravel 8
  DB：mysql 8.0.26
  WEBサーバソフトウェア：nginx 1.21.1
  エディタ：VSCode 1.84.0

## テーブル設計
![Screenshot 2024-02-25 141245](https://github.com/tmdressage/atte/assets/144135026/89f09dc3-4b90-4e17-8f00-fdaa874d935e)

## ER図
![Screenshot 2024-02-25 141811](https://github.com/tmdressage/rese/assets/144135026/46ee270d-2ae7-49af-96cd-5f8f414e2b5f)

## 環境構築
運営側でご用意いただいた環境（coachtech-material/laravel-docker-template.git）をベースにして、docker-compose.ymlと.envにmailhog用の設定を追加いたしました。  







## その他
お手数ですがご採点の程よろしくお願い申し上げます。以下補足事項でございます。

【全般について】
 ・ログインをしていない状態では、お気に入り登録・評価閲覧、飲食店予約が出来ない仕様になっております(各々クリックするとログイン画面へ飛びます)。 
 ・認証機能の作成にあたり、参考のためFortifyとLaravel Breezeをインストールしておりますが、基本は使用せずに自作いたしました。
 ・本人確認メールと、予約当日のリマインドメールの送信先は、開発用のメールサーバmailhogを使用いたしました。
 ・シーディングで各テーブル(ユーザ・飲食店情報・お気に入り・予約情報・飲食店評価)にデータをDBに格納しております。
 　便宜上、管理者ユーザ・店舗代表者ユーザ・飲食店情報には固定のデータをDBに格納しておりますので、再度シーディングを行う際は、事前にmigrate:freshしていただけますと幸いです。
  
【追加実装機能について】
 ・飲食店予約情報変更
　 ⇒マイページの予約情報欄の右上に表示される、開いた本のアイコンをクリックいただくと、飲食店予約情報変更ページに遷移いたします。
![Screenshot 2024-02-25 153817](https://github.com/tmdressage/rese/assets/144135026/81b0f23f-d187-412b-9011-3dee73f01a97)

・飲食店評価
　 ⇒マイページの予約情報欄(過去日時の予約)の右上に表示される、星のアイコンをクリックいただくと、飲食店評価ページに遷移いたします。
  
  ![Screenshot 2024-02-25 154146](https://github.com/tmdressage/rese/assets/144135026/c82de71b-9fb5-4a90-b1af-719bd6378764)

・飲食店評価閲覧
　 ⇒マイページ、または飲食店一覧画面の飲食店カードの右下に表示される、星のアイコンをクリックいただくと、飲食店評価閲覧ページに遷移いたします。
![Screenshot 2024-02-25 154240](https://github.com/tmdressage/rese/assets/144135026/4892b818-fb59-4ff0-8803-6b86f80c5010)

・バリデーション(認証／予約)
　⇒ログイン時・会員登録時・飲食店予約時・飲食店予約変更時、飲食店評価時、店舗代表者作成時、飲食店情報作成時において、各々バリデーションを作成いたしました。

・店舗代表者作成  
 ⇒システム管理者ユーザでログインいただくと、店舗代表者作成ページに遷移いたします。
 　メールアドレス：admin@example.co.jp
   パスワード：PasswordPassword
![Screenshot 2024-02-25 155332](https://github.com/tmdressage/rese/assets/144135026/1986e2ef-6975-41cb-85ca-876fa163b4d8)   

・飲食店情報作成
 ⇒作成した店舗代表者ユーザでログインいただくと、飲食店情報作成ページに遷移いたします。
   (初回ログイン時はメール認証から始まります)
![Screenshot 2024-02-25 155838](https://github.com/tmdressage/rese/assets/144135026/46fc64b0-b4d7-4376-9017-2ff8d7cbb0cf)

・飲食店情報更新
 ⇒新規で店舗情報を登録いただいた後は、同じフォームから上書き更新が出来ます。
![Screenshot 2024-02-25 160415](https://github.com/tmdressage/rese/assets/144135026/058051d4-4765-4b35-8c87-a7a2d1f252d8)

・飲食店予約情報確認
 ⇒店舗代表者ユーザで、ハンバーガーメニューのReservation Statusをクリックいただくと、飲食店予約情報確認ページに遷移いたします。
 　まだ飲食店情報を登録していない場合は、飲食店情報登録画面へと飛ぶ仕様です。
![Screenshot 2024-02-25 160447](https://github.com/tmdressage/rese/assets/144135026/e1e2053d-d2bc-4438-bec0-2b9e7985c750)

・飲食店画像のストレージ保存
　⇒飲食店情報作成時に、画像をアップロードいただくと、サーバのstorage/app/public/img配下に画像が保存され、DBにもパスが格納されます。
 　 シンボリックリンクにより、出力時はパスを参照して保存した画像が表示されます。
![Screenshot 2024-02-25 160830](https://github.com/tmdressage/rese/assets/144135026/627ee2b0-f00d-42ca-9119-46fab20a02cc)
![Screenshot 2024-02-25 161043](https://github.com/tmdressage/rese/assets/144135026/25590e05-c9c7-425d-a671-f415e8f4403e)

・メール認証
   ⇒メールの送信先は、開発用のメールサーバmailhogを使用しております。
  　 送信ボタンをクリックすると本人確認メールがmailhogに送信されます。
![Screenshot 2024-02-25 143204](https://github.com/tmdressage/rese/assets/144135026/e37fe2b9-8321-4d51-8920-5172044e6dee)
![Screenshot 2024-02-25 143344](https://github.com/tmdressage/rese/assets/144135026/c6fd0aa2-fed3-4067-9208-e6fc641e2879)

・予約当日リマインダー送信
   ⇒メールの送信先は、開発用のメールサーバmailhogを使用しております。
  　 app/Console/Commands/Batch.phpで予約日が当日のレコードを持つユーザ情報を抽出し、
   　cronの設定とapp/Console/Kernel.phpで該当ユーザ宛に予約当日の朝8:00にリマインダーが送信されるように設定しております。
![Screenshot 2024-02-25 161546](https://github.com/tmdressage/rese/assets/144135026/c2ffd1f1-ce94-4fbb-9282-9d83c671f02f)
![Screenshot 2024-02-25 161828](https://github.com/tmdressage/rese/assets/144135026/4c235f75-2145-47f1-9577-b9c6779a6c23)

 以上でございます。
 拙い点が多々ございますが、ご採点の程よろしくお願い申し上げます。
